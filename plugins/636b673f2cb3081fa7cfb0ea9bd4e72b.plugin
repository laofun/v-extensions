{"uuid":"636b673f2cb3081fa7cfb0ea9bd4e72b","name":"Truyá»‡n Txt","version":1.1,"url":"","language":"vi","icon":"iVBORw0KGgoAAAANSUhEUgAAAIMAAABkCAYAAACl3INcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAE42lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOS0wOC0xOFQyMjo1MiswNzowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTktMDgtMThUMjI6NTI6NTkrMDc6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTktMDgtMThUMjI6NTI6NTkrMDc6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmU1ZjZmNzNiLWYxOWEtNDM0MS05MDgxLTA2MGMyNWVkYTczYSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRp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\u003d","source":"http://truyentxt.com","regex":"(www.)?truyentxt.com/[^/]+/?$","author":"Darkrai","describe":"","group":"convert","supportUpdate":false,"chap":"local url \u003d ...\r\nlocal doc \u003d http:request(url):html()\r\nif doc ~\u003d nil then\r\n    local htm \u003d doc:select(\"div#contentChapter\"):html()\r\n    htm \u003d text:replace(htm, \"\u003c/i\u003e\", \"\")\r\n    htm \u003d text:replace(htm, \"\u003ci h.*?\u003e\", \"\")\r\n    htm \u003d text:replace(htm, \"\\n\", \"\")\r\n    return htm\r\nend\r\nreturn nil","toc":"local url \u003d ...\r\n\r\nlocal list \u003d {}\r\nlocal conn \u003d http:request(url)\r\nlocal doc \u003d conn:html()\r\nif doc ~\u003d nil then\r\n    local data \u003d regexp:find(doc:html(), \"showChapter\\\\((.*?)\\\\)\")\r\n    data \u003d text:replace(data, \"\u0027\", \"\")\r\n    data \u003d text:replace(data, \" \", \"\")\r\n    local showChapter \u003d text:split(data, \",\")\r\n    local bookId \u003d showChapter[1]\r\n    local source \u003d showChapter[2]\r\n    local postId \u003d showChapter[3]\r\n    local cookies \u003d conn:cookies()\r\n    local token \u003d regexp:find(cookies, \"csrf_cookie_name\u003d(.*?);\")\r\n    --encodeURIComponent\r\n    local hexDigits \u003d \u00270123456789ABCDEF\u0027\r\n    local encode \u003d \"\"\r\n    for i \u003d 1, string.len(token) do\r\n        local c \u003d string.byte(token, i, i)\r\n        if ((c \u003e\u003d 48 and c \u003c\u003d 57) or (c \u003e\u003d 97 and c \u003c\u003d 122) or (c \u003e\u003d 65 and c \u003c\u003d 90) or\r\n                c \u003d\u003d 45 or c \u003d\u003d 95 or c \u003d\u003d 46 or c \u003d\u003d 33 or c \u003d\u003d 126 or\r\n                c \u003d\u003d 42 or c \u003d\u003d 92 or c \u003d\u003d 40 or c \u003d\u003d 41) then\r\n            encode \u003d encode .. string.sub(token, i, i)\r\n        else\r\n            encode \u003d encode .. \"%\"\r\n            encode \u003d encode .. hexDigits[bit32.lshift(bit32.band(c, 240), 4)]\r\n            encode \u003d encode .. hexDigits[bit32.band(c, 15)]\r\n\r\n        end\r\n    end\r\n    --encodeURIComponent\r\n    local params \u003d { [\"book_id\"] \u003d bookId, [\"source\"] \u003d source, [\"post_id\"] \u003d postId, [\"csrf_name\"] \u003d token }\r\n    local json \u003d http:request(\"https://truyentxt.com/api/getListChapter\")\r\n                     :params(params)\r\n                     :cookie(false, true)\r\n                     :cookies(cookies)\r\n                     :post()\r\n                     :table()\r\n\r\n    doc \u003d html:parse(json[\"listchapter\"])\r\n\r\n    if (doc ~\u003d nil) then\r\n        local el \u003d doc:select(\"li a\")\r\n        for i \u003d 0, el:size() - 1 do\r\n            local e \u003d el:get(i)\r\n            table.insert(list, core:new_chapter(e:text(), e:attr(\"href\"), \"http://truyentxt.com\"))\r\n        end\r\n\r\n    end\r\nend\r\nreturn list","search":"local key, page \u003d ...\r\nlocal doc \u003d http:request(\"http://truyentxt.com/tim-kiem/\" .. key .. \"/\" .. (page * 10)):html()\r\n\r\nlocal list \u003d {}\r\n\r\nif doc ~\u003d nil then\r\n    list[\"count\"] \u003d num:to_int(doc:select(\".pagination a\"):last():attr(\"data-ci-pagination-page\"), 1)\r\n    local el \u003d doc:select(\"div.card-body \u003e div.row div.novel-item\")\r\n\r\n    if el ~\u003d nil then\r\n        local data \u003d {}\r\n        for i \u003d 0, el:size() - 1 do\r\n            local e \u003d el:get(i)\r\n            table.insert(data, core:new_search(\r\n                    e:select(\"h2\"):text(),\r\n                    e:select(\"h2 a\"):attr(\"href\"),\r\n                    e:select(\"img\"):attr(\"src\"),\r\n                    \"http://truyentxt.com\")\r\n            )\r\n        end\r\n        list[\"data\"] \u003d data\r\n    end\r\nend\r\nreturn list\r\n","detail":"local url \u003d ...\r\n\r\nlocal doc \u003d http:request(url):html()\r\n\r\nif doc ~\u003d nil then\r\n    local book \u003d {}\r\n    book[\"name\"] \u003d  doc:select(\"div.description \u003e h1\"):text()\r\n    book[\"cover\"] \u003d core:merge_url(\"http://truyentxt.com\", doc:select(\"div.book img\"):attr(\"src\"))\r\n    book[\"author\"] \u003d doc:select(\"div.description a\"):first():text()\r\n    book[\"description\"] \u003d doc:select(\"div.story_intro\"):first():html()\r\n    book[\"detail\"] \u003d doc:select(\"div.description \u003e .row\"):first():html()\r\n    return book\r\nend\r\nreturn nil","checked":true}